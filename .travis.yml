language: python

git:
  submodules: false

notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/7d967d9679efbbc43466
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: false     # default: false

python:
  - "3.5"

addons:
  apt:
    packages:
      - pyqt5-dev-tools

before_install:
  - sudo apt-get -qq -y update

install:
  - pip install -r requirements.txt

before_script:
  #- docker pull "qgis/qgis:${QGIS_DOCKER_TAG}"
  #- export QGIS_PREFIX_PATH=/usr
  #- export PYTHONPATH=${QGIS_PREFIX_PATH}/share/qgis/python/:${QGIS_PREFIX_PATH}/share/qgis/python/plugins:`pwd`:${PYTHONPATH}
  #- echo "PYTHONPATH:" ${PYTHONPATH}
  # - export LD_LIBRARY_PATH=${QGIS_PREFIX_PATH}/lib

script:
  - python3 -m flake8 --jobs=1
  #- docker run -v $TRAVIS_BUILD_DIR:/root/qgissettingmanager "qgis/qgis:${QGIS_DOCKER_TAG}" /root/qgissettingmanager/test/run_in_qgis_docker.sh


after_success:
  - scripts/ci/make_release.sh
